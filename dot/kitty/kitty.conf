# themes

include current-theme.conf
#include GruvBox_DarkHard.conf
#include Catppuccin-Macchiato.conf

copy_on_select yes

# terminal opacity and blur
background_opacity 0.95

# border effect using background image
background_image border-pattern.png
background_image_layout scaled
background_tint 0.0

# advance
term xterm-kitty
macos_option_as_alt no
enable_audio_bell yes

# notifications for long-running commands
notify_on_cmd_finish invisible 3.0

# font
font_family        JetBrainsMono Nerd Font Mono
bold_font          auto
italic_font        auto
bold_italic_font   auto
font_size 15.0

# font size management
map ctrl+shift+backspace change_font_size all 0

# cursor customization
# block / beam / underline
cursor_shape block
cursor_blink_interval 0
cursor_stop_blinking_after 0
shell_integration disabled

# scrollback
scrollback_lines 25000
wheel_scroll_multiplier 3.0

# mouse
mouse_hide_wait -1

# window layout
remember_window_size  yes
initial_window_width  1200
initial_window_height 750
window_border_width 0.5pt
enabled_layouts splits,tall,fat,grid,stack
window_padding_width 5
window_margin_width 0
draw_minimal_borders yes
inactive_text_alpha 0.3
hide_window_decorations titlebar-only
single_window_margin_width 1

# tab bar customization
tab_bar_style powerline
tab_powerline_style angled
tab_bar_edge top
tab_bar_align left
active_tab_font_style   bold
inactive_tab_font_style normal
tab_title_template "[{index}] {title}{' â—†' if layout_name == 'stack' and num_windows > 1 else ''}"
tab_switch_strategy left

# tab bar enhancements
tab_bar_min_tabs 1
tab_bar_margin_height 2.0 0.0

# tab management
map ctrl+shift+t new_tab
map ctrl+shift+right next_tab
map ctrl+shift+left previous_tab
map ctrl+shift+q close_tab

# tab switching with cmd+number
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map cmd+0 goto_tab -1

# interactive tab selector
map cmd+e select_tab

# tab utilities
map cmd+shift+r set_tab_title
map cmd+shift+, move_tab_backward
map cmd+shift+. move_tab_forward

# search
map cmd+f launch --type=overlay --stdin-source=@screen_scrollback fzf --no-sort --no-mouse --exact -i --tac
map cmd+shift+f launch --type=overlay --stdin-source=@screen_scrollback --stdin-add-formatting bat --paging=always --style=numbers --color=always
#map cmd+shift+f show_scrollback

# window management
map ctrl+shift+enter new_window
map ctrl+shift+] next_window
map ctrl+shift+[ previous_window

# splits
map cmd+d launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+w close_window
map cmd+shift+[ previous_window
map cmd+shift+] next_window

# move focus between splits
map cmd+left neighboring_window left
map cmd+down neighboring_window down
map cmd+up neighboring_window up
map cmd+right neighboring_window right

# resize splits
map cmd+shift+left resize_window narrower
map cmd+shift+right resize_window wider
map cmd+shift+up resize_window taller
map cmd+shift+down resize_window shorter

# overlay windows (always full screen)
map cmd+o launch --type=overlay --cwd=current
map cmd+p launch --type=overlay --cwd=current /opt/homebrew/bin/lazygit
map cmd+y launch --type=overlay --cwd=current /opt/homebrew/bin/yazi

# ssh shortcuts
# map cmd+g launch --type=tab sh -c "clear && ssh user@host"

# session shortcuts - load session into new OS window
map cmd+shift+s launch --type=background kitty --session ~/.config/kitty/session.conf

# git diff viewer with kitty's side-by-side view (cycles through changed files)
map cmd+i launch --type=overlay --cwd=current sh -c 'git difftool'
# git diff for staged changes
map cmd+shift+i launch --type=overlay --cwd=current sh -c 'git difftool --cached'

# layout management
map cmd+shift+space next_layout
map ctrl+alt+r goto_layout tall
map ctrl+alt+s goto_layout stack
map ctrl+shift+z toggle_layout stack

# broadcast typing to multiple windows
map ctrl+alt+b kitten broadcast
